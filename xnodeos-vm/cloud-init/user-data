#cloud-config
hostname: ubuntu-nixos
users:
  - name: ubuntu
    sudo: ALL=(ALL) NOPASSWD:ALL
    shell: /bin/bash
    ssh_authorized_keys:
      - ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQ... # Add your SSH key here
ssh_pwauth: true
disable_root: false
chpasswd:
  list: |
    ubuntu:ubuntu
  expire: false
package_update: true
package_upgrade: true
packages:
  - openssh-server
  - curl
  - wget
  - git
  - nix
runcmd:
  - curl -L https://nixos.org/nix/install | sh
  - source /etc/profile.d/nix.sh
  - export XNODE_OWNER="eth:0x0000000000000000000000000000000000000000"
  - export DOMAIN="localhost"
  - export ACME_EMAIL="dev@localhost"
  - export ENCRYPTED="0"
  - export USER_PASSWD="ubuntu"
  - curl -L https://raw.githubusercontent.com/Openmesh-Network/xnode-manager/main/os/install.sh | bash
